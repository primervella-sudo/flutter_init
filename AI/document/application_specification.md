# アプリケーション仕様書: AI Travel Persona Map

## メタ情報
- プロジェクト名: AI Travel Persona Map
- バージョン: v1.1.0
- 最終更新日: 2025-10-26
- 作成者: AI Assistant

## 概要

### コンセプト
Googleマップ上でAIペルソナと旅したスポットを記録し、写真とAI視点レビューを残して共有できるロールプレイ型旅行ログアプリ。

### 目的（解決したい課題）
- AIとロールプレイを楽しむユーザーが、バーチャル旅行体験を記録できるプラットフォームの提供
- 旅の思い出をAIペルソナの視点で視覚化・共有する新しい方法を提案

### 背景・文脈
ユーザーが複数のAIペルソナを使用して旅行シミュレーションを行い、その体験を地図上に記録・共有したいというニーズから発生

---

## 👥 ターゲットユーザー・ペルソナ

### 主要ペルソナ
- 全年齢（スマートフォンユーザー）
- AIとのロールプレイを好む層
- 体験型旅行記録に関心のある層
- SNSでの創作・共有活動に積極的なユーザー

### ユーザー課題
1. AIとロールプレイする体験を記録したい
2. 複数のペルソナで異なる視点から旅を楽しみたい
3. その体験を友人と簡単に共有したい

### 利用シナリオ
- 休日にアプリでお気に入りのペルソナを選んで旅行を計画
- 訪れたスポットを地図に登録し、写真を投稿
- AIにレビューを生成させるか、自分で編集
- SNSで友人と共有するか、共有リンクで直接招待

---

## 📋 ユースケース一覧

- **UC-01**: スポット登録と地図表示
- **UC-02**: 写真投稿と管理
- **UC-03**: AIレビュー生成・編集
- **UC-04**: ペルソナ管理
- **UC-05**: 共有リンク生成・アクセス
- **UC-06**: オフライン操作・同期
- **UC-07**: 初回起動・オンボーディング
- **UC-08**: エラーハンドリング・リトライ

---

## 🔍 スコープ定義

### In-Scope（今回対象）
- Googleマップ連携によるスポット記録・表示
- 写真アップロード・管理（最大5枚/50MB/スポット）
- Google Generative AI APIによるAIレビュー自動生成
- 複数ペルソナ管理（テキストファイルプロンプト対応）
- ランダムトークン付き共有リンク生成
- OS標準シェアによるSNS連携
- 端末ローカル保存によるオフライン対応
- 日本語・英語多言語対応
- 初回起動フロー・権限リクエスト
- エラーハンドリング・リトライ戦略

### Out-of-Scope（今回対象外）
- クラウドバックアップ機能
- ユーザー認証・アカウント管理
- コメント・フォロー機能
- 複数デバイス同期
- ビデオ投稿
- AIの学習機能（チューニング）

---

## 💡 機能要件（機能定義）

### 1. 地図/ホーム画面

| 項目 | 詳細 |
|------|------|
| 説明 | Googleマップ上にスポットを表示し、ピン操作でスポット詳細へ遷移 |
| 機能 | ・ピン表示<br/>・現在位置表示（オン/オフ切り替え）<br/>・ピン検索・フィルタ<br/>・共有リンク参照（ゲストアクセス） |
| 受け入れ基準 | ・地図が正常に表示される<br/>・ピンをタップするとスポット詳細画面に遷移<br/>・オフライン時も最新キャッシュが表示される |
| 依存関係 | Google Maps API、Drift（ローカルDB）|

### 2. スポット詳細画面

| 項目 | 詳細 |
|------|------|
| 説明 | 各スポットの詳細情報（名前、住所、日時、レビュー、写真）を表示 |
| 機能 | ・スポット編集・削除<br/>・共有リンク生成<br/>・SNS共有<br/>・レビュー編集（自動生成 ↔ 手動入力切り替え）<br/>・写真ギャラリー表示・並び替え |
| 受け入れ基準 | ・全情報が正確に表示される<br/>・編集が即座にローカル保存される<br/>・写真が正しい順序で表示される |
| 依存関係 | 地図画面、投稿作成画面 |

### 3. 投稿作成画面

| 項目 | 詳細 |
|------|------|
| 説明 | 新規スポット追加時の投稿作成フロー |
| 機能 | ・位置指定（地図タップ/検索）<br/>・リアルタイム位置取得オン/オフ<br/>・写真追加・並び替え・削除<br/>・容量チェック<br/>・AIレビュー自動生成（API呼び出し）<br/>・手動レビュー入力<br/>・ドラフト保存（オフライン時）<br/>・同期キュー（オンライン復帰時） |
| 受け入れ基準 | ・写真合計50MB超過時に警告表示<br/>・APIエラー時はリトライ表示<br/>・ドラフトは永続化される<br/>・オンライン復帰で自動同期 |
| 依存関係 | Google Maps API、Google Generative AI API、Drift、端末ストレージ |

### 4. ペルソナ管理画面

| 項目 | 詳細 |
|------|------|
| 説明 | 複数のAIペルソナを作成・管理 |
| 機能 | ・ペルソナ作成・編集・削除<br/>・名前、口調、プロンプトテキスト設定<br/>・テキストファイル取り込み<br/>・デフォルトペルソナ切り替え<br/>・プロンプトプレビュー |
| 受け入れ基準 | ・複数ペルソナが独立して管理される<br/>・テキストファイル取り込みが成功する<br/>・デフォルト選択時にレビュー生成に反映される |
| 依存関係 | Drift、端末ファイルシステム |

### 5. 共有機能

| 項目 | 詳細 |
|------|------|
| 説明 | ランダムトークン付きリンクで特定ユーザーと共有 |
| 機能 | ・リンク生成（128bitランダムトークン）<br/>・リンク再発行・失効<br/>・有効期限設定（オプション）<br/>・トークン認証<br/>・ゲストビューア（該当スポットのみ表示）<br/>・SNS シェア（OS標準シート） |
| 受け入れ基準 | ・リンク生成が即座に完了<br/>・トークン方式による認証が機能<br/>・ゲストはスポット詳細のみ閲覧可<br/>・コメント機能なし |
| 依存関係 | Drift、URL生成・検証 |

### 6. オフライン対応・同期

| 項目 | 詳細 |
|------|------|
| 説明 | 旅先などネット不安定な状況でのローカル操作と後続同期 |
| 機能 | ・ドラフト投稿ローカル保存<br/>・ペルソナ情報ローカル保存<br/>・オフライン表示（キャッシュマップ＋ローカルデータ）<br/>・同期キュー（オンライン復帰時自動実行）<br/>・競合検出・解決（タイムスタンプ基準） |
| 受け入れ基準 | ・オフライン時にドラフト保存可能<br/>・オンライン復帰で同期確認ダイアログ表示<br/>・競合時にユーザー選択肢提示（保持/上書き/破棄） |
| 依存関係 | Drift、ネットワーク監視 |

### 7. 多言語対応

| 項目 | 詳細 |
|------|------|
| 説明 | UI と AIレビュー生成を多言語対応 |
| 機能 | ・UI: 日本語/英語切り替え（Intl）<br/>・AIレビューリクエスト時にUI言語を反映<br/>・言語設定保存 |
| 受け入れ基準 | ・すべてのUI要素が翻訳される<br/>・レビュー生成が選択言語で実行される |
| 依存関係 | Intl、Google Generative AI API |

---

## 🚦 初回起動フロー・オンボーディング

### 初回起動時の処理順序

1. **スプラッシュ画面**（0.5～1秒）
   - アプリロゴ表示
   - 初回起動判定（SharedPreferences確認）

2. **権限リクエスト画面**（初回のみ）
   - **位置情報許可**
     - 理由: 「訪れたスポットを地図に記録するため」
     - iOS: NSLocationWhenInUseUsageDescription
     - Android: ACCESS_FINE_LOCATION
     - 拒否時: 手動で位置を指定可能と説明し続行可
   - **ストレージ許可**（Android 10未満）
     - 理由: 「写真を保存するため」
     - 拒否時: 写真機能が使用不可と警告表示

3. **APIキー設定画面**（任意・スキップ可）
   - デフォルトAPIキーを使用するか、ユーザー独自キーを設定するか選択
   - スキップ時: デフォルトキーで続行（無料枠制限あり）
   - 後から設定変更可能と案内

4. **デフォルトペルソナ作成**
   - 名前: 「旅の相棒」（デフォルト）
   - プロンプト: 簡易なテンプレートを自動生成
   - スキップ不可（最低1個のペルソナ必須）

5. **チュートリアル**（スキップ可）
   - スポット追加方法の簡単な説明（3画面程度）
   - 写真・レビュー・共有の基本操作
   - スキップ時: ヘルプから再表示可能

6. **ホーム画面へ遷移**
   - 空状態（スポット0件）表示
   - 「＋」ボタンで最初の投稿を促す

### オンボーディング完了フラグ
- SharedPreferencesに `onboardingCompleted: true` を保存
- 2回目以降は直接ホーム画面へ

---

## ⚠️ エラーハンドリング仕様

### 1. Google Maps API エラー

| エラー種別 | 原因 | ユーザー表示 | アプリ挙動 |
|-----------|------|------------|----------|
| API_KEY_INVALID | APIキー不正 | 「地図を読み込めません。設定を確認してください」 | 設定画面へ誘導ボタン表示 |
| NETWORK_ERROR | 通信エラー | 「ネットワークに接続できません」 | リトライボタン表示（最大3回） |
| QUOTA_EXCEEDED | 無料枠超過 | 「本日の地図表示上限に達しました」 | キャッシュマップのみ表示 |

### 2. Generative AI API エラー

| エラー種別 | 原因 | ユーザー表示 | アプリ挙動 |
|-----------|------|------------|----------|
| API_KEY_INVALID | APIキー不正 | 「AIレビュー生成に失敗しました」 | 手動入力モードへ自動切替 |
| QUOTA_EXCEEDED | 無料枠超過 | 「本日のAI生成上限に達しました」 | 手動入力モードへ切替 |
| TIMEOUT | 10秒タイムアウト | 「AIの応答がありません」 | リトライボタン表示（最大2回） |
| CONTENT_FILTERED | コンテンツポリシー違反 | 「生成できない内容が含まれています」 | 手動入力モードへ切替 |

### 3. ストレージエラー

| エラー種別 | 原因 | ユーザー表示 | アプリ挙動 |
|-----------|------|------------|----------|
| STORAGE_FULL | 端末容量不足 | 「ストレージ容量が不足しています」 | 写真追加不可・削除を促す |
| PERMISSION_DENIED | 権限拒否 | 「写真へのアクセス許可が必要です」 | 設定画面へ誘導 |
| FILE_NOT_FOUND | ファイル破損 | 「写真を読み込めません」 | プレースホルダー画像表示 |

### 4. リトライ戦略

- **Google Maps API**: 3秒間隔で最大3回リトライ
- **Generative AI API**: 5秒間隔で最大2回リトライ
- **ネットワークエラー**: 指数バックオフ（1秒→2秒→4秒）
- すべて失敗時: ユーザーに手動リトライボタン表示

### 5. エラーログ記録

- ローカルログファイルに記録（デバッグ用）
- 個人情報は記録しない
- 最大ログサイズ: 5MB（超過時に古いログを削除）

---

## 🔑 APIキー管理仕様

### デフォルトAPIキー

- **方針**: アプリにデフォルトのAPIキーを埋め込む
- **制限**: Google無料枠（Maps: 月28,000回、Generative AI: 日15回）
- **管理**: 環境変数として管理（Gitにはコミットしない）
- **リスク**: 無料枠超過時はユーザーに独自キー設定を促す

### ユーザー独自APIキー設定

#### 設定画面
- **場所**: 設定 → API設定
- **項目**:
  - Google Maps API キー（任意）
  - Google Generative AI API キー（任意）
- **保存先**: SharedPreferences（暗号化なし・ローカルのみ）
- **検証**: 設定時に簡単な疎通確認（テストリクエスト）

#### APIキー切り替えロジック
1. ユーザー設定キーが存在する場合 → 優先使用
2. ユーザー設定キーが無効な場合 → デフォルトキーへフォールバック
3. 両方失敗 → エラー表示・手動入力モードへ

#### APIキー未設定時の挙動
- **Maps**: デフォルトキーで動作（無料枠制限あり）
- **Generative AI**: デフォルトキーで動作（日15回まで）
- **超過時**: 「本日の上限に達しました。独自APIキーを設定すると継続利用できます」と表示

---

## 📷 写真関連の詳細仕様

### 写真アップロード

| 項目 | 仕様 |
|------|------|
| 最大枚数 | 5枚/スポット |
| 最大サイズ | 50MB（合計） |
| 対応形式 | JPEG, PNG, WebP |
| 圧縮 | あり（品質85%、長辺1920px以下にリサイズ） |
| EXIF情報 | 保持（位置情報・撮影日時）|

### 写真処理フロー

1. **選択時**
   - image_picker で写真選択
   - ファイルサイズ確認
   - 50MB超過時に警告表示

2. **圧縮処理**
   - 長辺が1920pxを超える場合、自動リサイズ
   - JPEG品質85%で再エンコード
   - EXIF情報は保持

3. **保存**
   - 端末ローカル（Documents/pictures/{spotId}/{uuid}.jpg）
   - パスをDriftに保存

4. **表示**
   - サムネイル: 300x300px（初回表示時生成・キャッシュ）
   - フルサイズ: タップ時に表示

### 写真向き自動補正
- EXIF Orientationタグを読み取り
- 表示時に自動回転
- 保存時は回転情報を保持

### 写真削除
- スポット削除時: 関連写真を一括削除
- 個別削除時: ファイルシステムから即時削除

---

## 🗑️ ペルソナ削除時の挙動

### 削除前確認

- 確認ダイアログ表示: 「このペルソナを削除しますか？」
- 関連スポット数を表示: 「{N}件のスポットが影響を受けます」

### 削除時の処理

1. **デフォルトペルソナの場合**
   - 削除不可（他にペルソナが存在する場合のみ削除可）
   - 最低1個のペルソナ必須
   - 別のペルソナをデフォルトに設定してから削除

2. **非デフォルトペルソナの場合**
   - 関連スポットのpersonaIdをnullに設定
   - スポット自体は削除されない
   - 次回レビュー生成時はデフォルトペルソナを使用

3. **削除後の表示**
   - スポット詳細画面: 「ペルソナ: 未設定」と表示
   - 地図画面: 通常通りピン表示

### 一括再割り当て機能（オプション）
- ペルソナ削除時に「別のペルソナに移行しますか？」と確認
- 選択した場合、関連スポットを一括で別ペルソナに再割り当て

---

## ⚡ パフォーマンス最適化戦略

### 地図表示最適化

| 項目 | 戦略 |
|------|------|
| ピン表示 | クラスタリング（100件以上で自動有効化） |
| ズームレベル | 低ズーム時はクラスタのみ、高ズーム時に個別ピン表示 |
| 描画 | 画面外ピンは非表示（Viewport Culling） |
| キャッシュ | 地図タイルを30日間キャッシュ |

### 写真読み込み最適化

| 項目 | 戦略 |
|------|------|
| サムネイル生成 | 初回表示時に生成・永続化 |
| 遅延読み込み | スクロール時に段階的ロード |
| メモリ管理 | LRUキャッシュ（最大50枚） |
| プリロード | 次の3枚を先読み |

### データベースクエリ最適化

| 項目 | 戦略 |
|------|------|
| インデックス | lat, lng, personaId, createdAt にインデックス作成 |
| ページネーション | 初回50件、スクロールで追加読み込み |
| 集計クエリ | COUNT等は非同期実行 |

### キャッシュクリア戦略

- **自動クリア**: 30日経過したマップタイルキャッシュ
- **手動クリア**: 設定画面から「キャッシュ削除」機能
- **低容量警告**: 空き容量が500MB未満で警告表示

---

## 🎨 UI/UX詳細仕様

### 空状態（Empty State）

| 画面 | 表示内容 | アクション |
|------|---------|----------|
| ホーム（地図） | イラスト + 「まだスポットがありません」<br/>「+ボタンで最初の旅を記録しよう」 | +ボタン強調表示 |
| ペルソナ管理 | 「ペルソナを作成して旅を始めよう」 | 「新規作成」ボタン |
| スポット詳細（写真） | 「写真を追加」プレースホルダー | タップで写真選択 |

### ローディング表示

| 処理 | 表示タイプ | 位置 |
|------|----------|------|
| 地図読み込み | スピナー（全画面） | 画面中央 |
| AI生成中 | プログレスバー + 「AIが考え中...」 | スポット詳細画面下部 |
| 写真アップロード | プログレスバー + パーセント表示 | 写真サムネイル上 |
| 同期処理 | スナックバー「同期中...」 | 画面下部 |

### トースト/スナックバー使い分け

| 用途 | 種類 | 表示時間 |
|------|------|---------|
| 成功通知（保存完了等） | スナックバー（緑） | 2秒 |
| エラー通知 | スナックバー（赤） | 5秒 + 閉じるボタン |
| 情報通知（オフライン等） | スナックバー（青） | 3秒 |
| 警告（容量超過等） | トースト（黄） | 3秒 |

### 確認ダイアログが必要な操作

- スポット削除
- ペルソナ削除
- 共有リンク失効
- キャッシュ全削除
- ドラフト破棄

### アニメーション原則

- **画面遷移**: 300ms Cubic Bezier
- **ボタンタップ**: リップルエフェクト
- **リスト追加**: Fade In + Slide Up（200ms）
- **削除**: Slide Out + Fade Out（250ms）

---

## 🎨 画面設計（概要）

### 主要画面構成

```
ホーム（地図）
  ├→ スポット詳細
  │   ├→ スポット編集
  │   ├→ 共有リンク生成
  │   └→ SNS シェア
  ├→ 投稿作成
  │   ├→ 位置指定
  │   ├→ 写真管理
  │   └→ AIレビュー生成 / 手動入力
  └→ ペルソナ管理
      ├→ ペルソナ作成/編集
      └→ テキストファイル取り込み
```

### 画面遷移
1. **起動** → スプラッシュ → オンボーディング（初回のみ） → ホーム（地図）
2. **ホーム** → スポット詳細（ピンタップ）
3. **ホーム** → 投稿作成（＋ボタン）
4. **ホーム** → ペルソナ管理（設定メニュー）
5. **投稿作成** → ホーム（投稿完了）
6. **スポット詳細** → 共有ビューア（リンククリック）

### ナビゲーション原則
- ボトムナビゲーションバー: ホーム・投稿作成・ペルソナ管理
- ハンバーガーメニュー: 設定・ヘルプ・プライバシー

---

## 📊 データ要件

### スポットエンティティ（Spot）

```dart
{
  id: String (UUID),                    // 一意識別子
  title: String,                        // スポット名
  address: String,                      // 住所
  lat: double,                          // 緯度
  lng: double,                          // 経度
  visitedAt: DateTime,                  // 訪問日時
  photos: List<{
    path: String,                       // ローカルファイルパス
    size: int,                          // ファイルサイズ（バイト）
    order: int,                         // 表示順序
  }>,
  totalPhotoSize: int,                  // 合計サイズ（バイト）
  reviewText: String,                   // レビューテキスト
  reviewGeneratedFlag: bool,            // true=自動生成, false=手動入力
  personaId: String?,                   // 所属ペルソナID（null可）
  shareToken: String?,                  // 共有リンク用トークン
  shareExpiresAt: DateTime?,            // 共有リンク有効期限（null=無期限）
  syncStatus: String,                   // 'local' / 'synced' / 'failed'
  createdAt: DateTime,
  updatedAt: DateTime,
}
```

### ペルソナエンティティ（Persona）

```dart
{
  id: String (UUID),                    // 一意識別子
  name: String,                         // ペルソナ名
  toneStyle: String,                    // 口調・話し方設定（free text）
  promptText: String,                   // プロンプト＋会話ログテキスト
  createdAt: DateTime,
  updatedAt: DateTime,
  isDefault: bool,                      // デフォルトペルソナフラグ
}
```

### アプリ設定（AppSettings）

```dart
{
  locale: String,                       // 'en' / 'ja'
  mapViewPreferences: JSON,             // 現在位置表示設定等
  aiApiKey: String?,                    // Google Generative AI API キー（ユーザー設定可）
  mapsApiKey: String?,                  // Google Maps API キー（ユーザー設定可）
  realtimeLocationEnabled: bool,        // リアルタイム位置取得のデフォルト
  onboardingCompleted: bool,            // オンボーディング完了フラグ
}
```

### バリデーション要件
- スポット名: 1～100字
- 住所: 1～500字
- 緯度経度: 有効なGPS座標範囲内
- 写真合計: 50MB以内、最大5枚
- ペルソナ名: 1～50字
- プロンプトテキスト: 1～10,000字

### 永続化・保存戦略
- **主データベース**: Drift（SQLite）によるローカルDB保存
- **写真**: 端末ローカルストレージ（Documents/pictures配下）
- **設定**: Drift DB + SharedPreferences
- **同期**: オンライン時のキュー処理（Driftキューテーブル）

---

## 🔐 非機能要件

### 性能（応答時間／安定性）
- オフライン操作時の応答性: 1秒以内でローカルDB読み書き
- 地図スクロール・ズーム操作: 60fps維持
- 写真ロード: 3秒以内
- API呼び出し: 10秒タイムアウト（リトライあり）
- 初回起動: 3秒以内でホーム画面表示

### セキュリティ（認可・認証・データ保護）
- ログイン機能なし（ゲストアプリ）
- 共有リンク認証: 128bit ランダムトークン（URLセーフ）
- 写真ファイル: 端末ローカルのみ（バックアップなし）
- 共有リンク: HTTPS前提での配信
- APIキー: SharedPreferencesに平文保存（ローカルのみ）

### 可用性・運用
- オフライン操作: 完全対応
- キャッシュ有効期限: 30日
- ドラフト保存: 無期限（ユーザー削除まで）
- ログ記録: ローカルのみ（デバッグ用、最大5MB）

### アクセシビリティ
- コントラスト比: WCAG 2.1 AA以上
- 音声読み上げ: VoiceOver/TalkBackサポート
- テキストサイズ: システム設定に応じた動的調整
- ピン・写真ラベル: セマンティックラベル付与

---

## 🛠️ 技術選定

| カテゴリ | 技術 | 役割 |
|----------|------|------|
| UI/Frame | Flutter | クロスプラットフォーム開発 |
| State Mgmt | Riverpod, hooks_riverpod | 型安全な状態管理・DI |
| UI Logic | Flutter Hooks | ローカル状態・ライフサイクル管理 |
| Routing | GoRouter | 型安全・宣言的なナビゲーション |
| Data Model | Freezed | イミュータブルエンティティ生成 |
| Local DB | Drift | 型安全なSQLite操作・永続化 |
| Map | Google Maps API | 地図表示・スポット検索 |
| AI | Google Generative AI API（無料枠） | レビュー自動生成 |
| I18n | Intl | 多言語対応 |
| Storage | 端末ローカル + SharedPreferences | 写真・設定保存 |
| Image | image_picker, image | 写真選択・圧縮 |
| Network | connectivity_plus | ネットワーク監視 |

---

## ⚠️ リスク・前提・制約

### 主要リスク
- **Google Maps API 制限**: 無料枠での利用制限に達した場合の対応（有料移行 or APIキー要求）
- **Google Generative AI 仕様変更**: APIの更新による非互換性
- **端末ストレージ満杯**: ユーザーが手動削除を行わない場合の警告・対応
- **写真ファイル破損**: ローカルストレージの障害時のリカバリ戦略の不備

### 重要前提
- ユーザーがGPS対応端末を使用している
- インターネット接続が時折利用可能（完全オフラインではない）
- ユーザーがアプリのストレージアクセス許可を付与

### 制約条件
- ログイン機能がないため、端末固有のデータ管理
- マルチデバイス同期未対応
- クラウドバックアップ機能なし
- 共有リンクの有効期限は手動設定（自動失効なし）

---

## 🔗 依存関係

### 外部API・サービス
- **Google Maps Platform**: スポット表示・検索・ジオコーディング
- **Google Generative AI**: テキスト生成（レビュー自動生成）

### ライブラリ・プラグイン
- flutter
- riverpod, hooks_riverpod
- flutter_hooks
- go_router
- freezed_annotation, freezed
- drift, drift_dev
- google_maps_flutter
- google_generative_ai（または同等）
- flutter_localizations, intl
- image_picker, image
- shared_preferences
- path_provider
- connectivity_plus
- uuid（UUID生成用）
- url_launcher（共有機能用）

---

## 📌 マイルストーン（仕様策定観点）

- **M1**: 仕様草案提示 ✅ 完了（2025-10-26）
- **M2**: 詳細化・合意 ✅ 完了（2025-10-26）
- **M3**: 第二段階へ移行 → 次ステップ

---

## ✅ 受け入れ基準（全体）

### 合意文言
「AI Travel Persona Mapのアプリケーション仕様書（v1.1）について、全体要件および詳細仕様に合意し、第二段階（構造計画フェーズ）への移行を了承します。」

### 必要ドキュメント
- ✅ 本仕様書最新版（application_specification.md）
- ✅ 参照ドキュメント: AI/architecture/technology_stack.md

---

## 📝 更新履歴

| 日時 | バージョン | 内容 |
|------|-----------|------|
| 2025-10-26 | v1.0.0 | 初版作成・第一段階（仕様策定）完了 |
| 2025-10-26 | v1.1.0 | 詳細仕様追記（初回起動フロー、エラーハンドリング、APIキー管理、写真仕様、ペルソナ削除、パフォーマンス、UI/UX詳細） |

---

## 🔗 参考・関連

### プロセス詳細（第一段階）
- `AI/instructions/001/project_rules_stage1_step1.md`
- `AI/instructions/001/project_rules_stage1_step2.md`
- `AI/instructions/001/project_rules_stage1_step3.md`
- `AI/instructions/001/project_rules_stage1_step4.md`

### 上位方針
- `AI/instructions/project_rules.md`

### アーキテクチャ規約
- `AI/architecture/lib/features/features_architecture.md`
- `AI/architecture/technology_stack.md`
